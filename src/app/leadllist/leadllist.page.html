<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>
      Lead(s) List
    </ion-title>
    <p slot="end"><small>{{user}}</small></p>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="refresh">
    Pull down to refresh
  </div>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-list lines="none">
    <ion-item lines="none" class="no-padding">
      <ion-label>Filter leads</ion-label>
      <ion-button color="primary" (click)='popOverTrigger($event)'>Filter</ion-button>
    </ion-item>
  </ion-list>
  <div class="no_lead" *ngIf="!leadData.length">
    <img src="assets/no-lead-ico.png">
    <h3>Ops! No lead yet</h3>
  </div><!-- /no_lead -->
  <ion-item lines="none" (click)="onClick(data)" *ngFor="let data of leadData"
    class="{{data.user_active}}">
    <ion-avatar slot="start">
      <img src="https://gravatar.com/avatar/dba6bae8c566f9d4041fb9cd9ada7741?d=identicon&f=y">
    </ion-avatar>
    <ion-label>
      <h2>{{data.customer}}</h2>
      <p>{{data.company_name}}</p>
    </ion-label>
    <ion-chip slot="end" color="tertiary" *ngIf="data.user_active != 'ACTIVE'; else activeLead">{{data.status}}</ion-chip>

    <ng-template #activeLead>
      <div class="alert_active">
        <ion-chip slot="end">ACTIVE</ion-chip>
      </div>
    </ng-template>
  </ion-item>

  <!-- Hidden datetime picker -->
  <ion-item hidden="true">
    <ion-label position="floating">Follow Up</ion-label>
    <ion-datetime #timePicker1 [(ngModel)]="selectedDate1" name="dateselect" displayFormat="DD MMM YYYY HH:mm"
      min="2020-01" placeholder="Select Date" (ionChange)="dateTimeSearchOnClick()"></ion-datetime>
    <ion-icon name="calendar" slot="end"></ion-icon>
  </ion-item>

  <!-- Hidden datetime picker -->
  <ion-item hidden="true">
    <ion-label position="floating">Follow Up</ion-label>
    <ion-datetime #timePicker2 [(ngModel)]="selectedDate2" name="dateselect" displayFormat="DD MMM YYYY HH:mm"
      min="2020-01" placeholder="Select Date" (ionChange)="dateTimeSearchOnClick()"></ion-datetime>
    <ion-icon name="calendar" slot="end"></ion-icon>
  </ion-item>


  <!-- Hidden select box -->
  <ion-item hidden="true">
    <ion-select #statusPicker interface="alert" cancelText="Cancel" okText="Search" value="Appointment"
      [(ngModel)]="selectStatus" (ionChange)="statusSearchOnClick()">
      <ion-select-option value="Appointment">Appointment</ion-select-option>
      <ion-select-option value="Follow Up">Follow up</ion-select-option>
      <ion-select-option value="Not interested">Not interested</ion-select-option>
      <ion-select-option value="Open">Open</ion-select-option>
      <ion-select-option value="Replied">Replied</ion-select-option>
      <ion-select-option value="Quotation">Quotation</ion-select-option>
      <ion-select-option value="Lost Quotation">Lost Quotation</ion-select-option>
      <ion-select-option value="Interested">Interested</ion-select-option>
      <ion-select-option value="Converted">Converted</ion-select-option>
    </ion-select>
  </ion-item>

  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadMore($event)" loadingSpinner="bubbles"
    loadingText="Loading more...">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll>

</ion-content>
